(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{331:function(e,t,a){},476:function(e,t,a){e.exports=a(801)},484:function(e,t,a){},801:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(29),l=a.n(c),i=a(808),r=(a(331),a(50)),s=a.n(r),u=a(67),d=a(21),m=a(22),h=a(28),p=a(24),g=a(27),f=a(802),b=a(807),y=a(809),E=a(207),k=a(182),v=(a(484),{color:"#ffffff"}),C=function(e){return o.a.createElement(k.a,null,o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:16},o.a.createElement(E.a,{style:v,fluid:!0},o.a.createElement("div",{name:"title",className:"title",dangerouslySetInnerHTML:{__html:e.title}}),o.a.createElement("div",{name:"body",style:{color:"#ffffff"},className:"body",dangerouslySetInnerHTML:{__html:e.body}})))))},S=a(209),x=a(230),O=a.n(x),w=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={date:O()().format("MMMM D, YYYY"),time:O()().format("h:mm A")},a.timeInterval=function(){a.setState({date:O()().format("MMMM D, YYYY"),time:O()().format("h:mm A")})},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){e.timeInterval()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval)}},{key:"render",value:function(){return o.a.createElement(E.a,null,o.a.createElement("p",{style:{color:"white",fontSize:"calc(15px + ".concat(this.props.dateVW,")"),margin:"0",textAlign:"center"}},this.state.date),o.a.createElement("p",{style:{color:"white",fontSize:"calc(15px + ".concat(this.props.dateVW,")"),textAlign:"center"}},this.state.time))}}]),t}(o.a.Component),j=a(33),A=a.n(j),_=(a(564),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={currentWeather:"",conditions:"fair",temp:"",temp_max:"",temp_min:"",iconName:"",iconImage:""},a.darkSkyIcons=["clear-day","clear-night","rain","snow","sleet","wind","fog","cloudy","partly-cloudy-day","partly-cloudy-night"],a.iconSelector=function(){switch(a.state.icon){case"clear-day":a.setState({iconImage:"wi-day-sunny"});break;case"clear-night":a.setState({iconImage:"wi-night-clear"});break;case"rain":a.setState({iconImage:"wi-rain"});break;case"snow":a.setState({iconImage:"wi-snow"});break;case"sleet":a.setState({iconImage:"wi-sleet"});break;case"wind":a.setState({iconImage:"wi-strong-wind"});break;case"fog":a.setState({iconImage:"wi-fog"});break;case"cloudy":a.setState({iconImage:"wi-cloudy"});break;case"partly-cloudy-day":a.setState({iconImage:"wi-day-cloudy"});break;case"partly-cloudy-night":a.setState({iconImage:"wi-night-partly-cloudy"});break;default:a.setState({iconImage:"wi-day-cloudy"})}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;A.a.get("/weather").then(function(t){e.setState({temp:t.data.temperature,icon:t.data.icon}),e.iconSelector()}).catch(function(e){console.log(e)}),this.timeInterval=setInterval(function(){A.a.get("/weather").then(function(t){e.setState({temp:t.data.temperature,icon:t.data.icon}),e.iconSelector()}).catch(function(e){console.log(e)})},36e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval)}},{key:"render",value:function(){return o.a.createElement(E.a,{textAlign:"center",style:{marginTop:".5em"}},o.a.createElement("span",{style:{fontSize:"calc(17px + ".concat(this.props.weatherVW,")"),color:"white"}},o.a.createElement("i",{className:"wi ".concat(this.state.iconImage)})),o.a.createElement("p",{style:{color:"white",fontSize:"calc(15px + ".concat(this.props.weatherVW,")")}},Math.round(this.state.temp),"\xb0F"))}}]),t}(o.a.Component)),I=function(){return o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:4},o.a.createElement(_,{weatherVW:"2vw"})),o.a.createElement(k.a.Column,{width:8},o.a.createElement(S.a,{textAlign:"center",as:"h1",inverted:!0,style:{fontSize:"3vw",fontWeight:"200"}},"Announcements")),o.a.createElement(k.a.Column,{width:4},o.a.createElement(w,{dateVW:"2vw"})))},T=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={fullAnnouncement:[],title:"",body:"",backgroundImage:"",opacity:".5"},a.componentDidUpdate=function(e){a.props.opacity!==e.opacity&&a.setState({opacity:a.props.opacity})},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;A.a.get("/announcements/liveStatus").then(function(t){e.setState({fullAnnouncement:t.data,title:t.title,body:t.body})}),A.a.get("/boards").then(function(t){e.setState({backgroundImage:t.data[0].background_image,opacity:t.data[0].background_opacity})}),setInterval(function(){A.a.get("/announcements/liveStatus").then(function(t){e.setState({fullAnnouncement:t.data,title:t.title,body:t.body})}).catch(function(e){return console.log(e)})},5e3)}},{key:"render",value:function(){var e={backgroundImage:"url(".concat(this.state.backgroundImage||"https://live.staticflickr.com/25/62666535_0a7513949f_b.jpg",")"),backgroundPosition:"center",height:"100vh",width:"100%",position:"fixed"};return o.a.createElement("div",{className:"backgroundImageContainer",style:e},o.a.createElement(E.a,{className:"liveDisplay",fluid:!0,key:this.props.key,style:{background:"rgb(0,0,0,".concat(this.state.opacity,")"),height:"105vh"}},o.a.createElement(k.a,{className:"widescreen"},o.a.createElement(I,null),o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:16},this.state.fullAnnouncement.map(function(e){return o.a.createElement(C,{key:e.id,title:e.announcement_title,body:e.announcement_body})}))))))}}]),t}(o.a.Component),D=Object(y.a)(T),M=a(425),R=new(function(){function e(){Object(d.a)(this,e),this.auth0=new M.a.WebAuth({domain:"".concat("dev-i177l19y.auth0.com"),audience:"https://".concat("dev-i177l19y.auth0.com","/userinfo"),clientID:"".concat("T2UZx9JeMqsq6QbQYLWh0EjzjIMvHUAJ"),redirectUri:"http://".concat("announcer.internal.sheridanpoint.org","/callback"),responseType:"id_token",scope:"openid profile",sso:!1}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this),this.renewSession=this.renewSession.bind(this),this.setSession=this.setSession.bind(this)}return Object(m.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,a){e.auth0.parseHash(function(n,o){return n?a(n):o&&o.idToken?(e.setSession(o),void t()):a(n)})})}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true"),this.acccessToke=e.accessToken,this.idToken=e.idToken,this.profile=e.idTokenPayload,this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"signOut",value:function(){this.acccessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),this.auth0.logout({returnTo:"http://".concat("announcer.internal.sheridanpoint.org","/"),clientID:"".concat("T2UZx9JeMqsq6QbQYLWh0EjzjIMvHUAJ")})}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(e.logout(),console.log(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))})}},{key:"silentAuth",value:function(){var e=this;return new Promise(function(t,a){e.auth0.checkSession({},function(n,o){if(n)return a(n);e.setSession(o),t()})})}}]),e}()),B=a(190),z=a(185),H=a(806),P=Object(y.a)(function(e){return o.a.createElement(B.a,{inverted:!0,fixed:"top"},o.a.createElement(E.a,null,o.a.createElement(B.a.Item,{position:"left",as:H.a,to:"/",header:!0},o.a.createElement(z.a,{size:"mini",src:"/vector-megaphone-man-shouting-8.png",style:{marginRight:"1.5em"}}),"Announce"),!R.isAuthenticated()&&o.a.createElement(B.a.Item,{onClick:R.signIn},"Add announcement"),R.isAuthenticated()&&o.a.createElement(B.a.Item,{as:H.a,to:"/displayeditor"},"Add announcement"),o.a.createElement(B.a.Item,{as:H.a,to:"/display",target:"_blank"},"View live"),!R.isAuthenticated()&&o.a.createElement(B.a.Item,{onClick:R.signIn},"Profile"),R.isAuthenticated()&&o.a.createElement(B.a.Item,{as:H.a,to:"/profile"},"Profile"),!R.isAuthenticated()&&o.a.createElement(B.a.Item,{onClick:R.signIn},"Log in"),R.isAuthenticated()&&o.a.createElement(B.a.Item,{as:"a",onClick:function(){R.signOut(),e.history.replace("/")}},"Log out")))}),U=a(193),L=function(){return o.a.createElement(U.a,{inverted:!0,vertical:!0},o.a.createElement(E.a,{textAlign:"center"},o.a.createElement(z.a,{centered:!0,size:"mini",src:"/vector-megaphone-man-shouting-8.png"})))},N=a(30),V=a(214),W=a(127),q=a(248),F=a(224),Y=a(196),J=a(466),K=a(232),Q=a(57),Z=(a(676),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).deleteSchedule=function(){A.a.delete("/announcements/".concat(a.props.post_id)).catch(function(e){return console.log(e)}).then(function(){return a.setState({scheduleDeleted:!0})})},a.checkSchedule=function(){},a.handleSubmit=function(e){a.checkSchedule(),e.preventDefault();var t=a.props.post_id;a.state.currentSchedule.length>0?A.a.put("/schedules/".concat(t),{date_time_start:a.state.startTime.toLocaleDateString(),date_time_end:a.state.endTime.toLocaleDateString()},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.closeModal(e)}).catch(function(e){return console.log(e)}):A.a.post("/schedules",{date_time_start:a.state.startTime.toLocaleDateString(),date_time_end:a.state.endTime.toLocaleDateString(),AnnouncementId:t},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.closeModal(e)}).catch(function(e){return console.log(e)})},a.handleStartDate=function(e){a.setState({startTime:e})},a.handleEndDate=function(e){a.setState({endTime:e})},a.handleSelectStart=function(e){a.setState({startTime:e})},a.handleSelectEnd=function(e){a.setState({endTime:e})},a.handleSubmit=a.handleSubmit.bind(Object(N.a)(Object(N.a)(a))),a.state={startTime:new Date,endTime:new Date,currentSchedule:[],postMessage:"",scheduleDeleted:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"closeModal",value:function(e){setTimeout(function(){Object(Q.toast)({title:"Successfully added announcement"})},500),this.setState({postMessage:e.statusText}),this.props.closeMod()}},{key:"componentDidMount",value:function(){var e=this;A.a.get("/schedules/".concat(this.props.post_id)).catch(function(e){return console.log(e)}).then(function(t){return e.setState({currentSchedule:t.data})})}},{key:"render",value:function(){return 0===this.state.currentSchedule.length?o.a.createElement("div",null,o.a.createElement("div",{className:this.props.classes.flexcontainer},o.a.createElement("form",{className:this.props.container,noValidate:!0,onSubmit:this.handleSubmit},o.a.createElement(k.a,{centered:!0,textAlign:"center",columns:3},o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,null,o.a.createElement(S.a,{as:"h5"},"Date Start"),o.a.createElement(K.a,{selected:this.state.startTime,onChange:this.handleStartDate,onSelect:this.handleSelectStart,minDate:new Date,dateFormat:"yyyy-MM-dd",key:1})),o.a.createElement(k.a.Column,null,o.a.createElement(S.a,{as:"h5"},"Date End"),o.a.createElement(K.a,{selected:this.state.endTime,onSelect:this.handleSelectEnd,onChange:this.handleEndDate,dateFormat:"yyyy-MM-dd",minDate:new Date,key:2})),o.a.createElement(k.a.Column,null,o.a.createElement(Y.a,{type:"submit",positive:!0,style:{position:"absolute",right:0,bottom:0}},"Save"))))),o.a.createElement(S.a,{as:"h3"},this.state.postMessage)),o.a.createElement(S.a,{as:"h2"},o.a.createElement(W.a,{name:"calendar"}),o.a.createElement(S.a.Content,null,"No Schedules"))):o.a.createElement("div",null,o.a.createElement("div",{className:this.props.classes.flexcontainer},o.a.createElement("form",{className:this.props.container,noValidate:!0,onSubmit:this.handleSubmit},o.a.createElement(k.a,{centered:!0,textAlign:"center",columns:3},o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,null,o.a.createElement(S.a,{as:"h5"},"Date Start"),o.a.createElement(K.a,{selected:this.state.startTime,onChange:this.handleStartDate,minDate:new Date,dateFormat:"yyyy-MM-dd"})),o.a.createElement(k.a.Column,null,o.a.createElement(S.a,{as:"h5"},"Date End"),o.a.createElement(K.a,{selected:this.state.endTime,onChange:this.handleEndDate,dateFormat:"yyyy-MM-dd",minDate:new Date})),o.a.createElement(k.a.Column,null,o.a.createElement(Y.a,{type:"submit",positive:!0},"Save"))))),o.a.createElement(S.a,{as:"h3"},this.state.postMessage)),o.a.createElement(S.a,{as:"h3"}," ",o.a.createElement(W.a,{name:"calendar check outline"}),"Current schedule"),this.state.currentSchedule.map(function(e){return o.a.createElement(k.a,{columns:2,key:e.id},o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:3},o.a.createElement(S.a,{as:"h4"},"Date start"),o.a.createElement(S.a,{as:"h4"},e.date_time_start)),o.a.createElement(k.a.Column,{width:3},o.a.createElement(S.a,{as:"h4"}," Date end"),o.a.createElement(S.a,{as:"h4"},e.date_time_end))))}))}}]),t}(o.a.Component)),G=Object(J.withStyles)(function(e){return{flexcontainer:{display:"flex",flexDirection:"row"},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200}}})(Z),X=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).saveAnnouncement=function(){var e=a.props.post_id;a.state.body?a.state.title?A.a.put("/announcements/".concat(e),{user_id:999999993,announcement_title:a.state.title,announcement_body:a.state.body,status:"active"},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.openModal(e)}).catch(function(e){console.log(e)}):A.a.put("/announcements/".concat(e),{user_id:999999993,announcement_body:a.state.body,status:"active"},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.openModal(e)}).catch(function(e){console.log(e)}):A.a.put("/announcements/".concat(e),{user_id:999999993,announcement_title:a.state.title,status:"active"},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.openModal(e)}).catch(function(e){console.log(e)})},a.openModal=function(){a.setState({openModal:!0,title:"",body:""})},a.closeModal=function(){a.props.onSave(),a.setState({openModal:!1})},a.deleteAnnouncement=function(){A.a.post("/announcements/status",{user_id:999992,id:a.props.post_id,status:"archive"},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.props.afterDelete()}).catch(function(e){return console.log(e)})},a.handleTitleChange=a.handleTitleChange.bind(Object(N.a)(Object(N.a)(a))),a.handleBodyChange=a.handleBodyChange.bind(Object(N.a)(Object(N.a)(a))),a.saveAnnouncement=a.saveAnnouncement.bind(Object(N.a)(Object(N.a)(a))),a.deleteAnnouncement=a.deleteAnnouncement.bind(Object(N.a)(Object(N.a)(a))),a.announcementRef=o.a.createRef(),a.state={title:"",body:"",live:!0,target_post_id:"",deleted:!1,openModal:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e})}},{key:"handleBodyChange",value:function(e){this.setState({body:e})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return R.isAuthenticated()?o.a.createElement(k.a,null,o.a.createElement(k.a.Row,{key:this.props.post_id},o.a.createElement(k.a.Column,{width:14},o.a.createElement(V.a,{innerRef:this.announcementRef},o.a.createElement(E.a,null,o.a.createElement(F.a,{ref:"body",inline:!0,apiKey:"2v70mtgk4kz045dkbblsshf5xoky86546vqb4bvj4h3oaqds",initialValue:this.props.title,init:{menubar:!1,fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 20px 22px 24px 26px 28px 30px 34px 38px 42px 46px 50px"},plugins:"link table wordcount textcolor visualblocks spellchecker",toolbar:"cut copy paste undo redo bold italic underline fontsizeselect forecolor backcolor align image",onEditorChange:this.handleTitleChange},o.a.createElement("div",{ref:"title",name:"title",className:"title",dangerouslySetInnerHTML:{__html:this.props.title}})),o.a.createElement(F.a,{ref:"body",inline:!0,apiKey:"2v70mtgk4kz045dkbblsshf5xoky86546vqb4bvj4h3oaqds",initialValue:this.props.body,init:{menubar:!1,fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 20px 22px 24px 26px 28px 30px 34px 38px 42px 46px 50px"},plugins:"link table wordcount lists textcolor image",toolbar:"cut copy paste undo redo bold italic underline fontsizeselect forecolor backcolor align numlist bullist image",onEditorChange:this.handleBodyChange},o.a.createElement("div",{name:"body",className:"body",dangerouslySetInnerHTML:{__html:this.props.body}}))))),o.a.createElement(k.a.Column,{floated:"right",verticalAlign:"middle",width:2},o.a.createElement(W.a,{name:"trash alternate",size:"large",onClick:this.deleteAnnouncement,inverted:!0}),o.a.createElement(W.a,{"data-post_id":this.props.post_id,name:"save",size:"large",onClick:this.saveAnnouncement,inverted:!0}),o.a.createElement(W.a,{name:"calendar times outline",size:"large",onClick:this.openModal,inverted:!0}),o.a.createElement(q.a,{size:"small",open:this.state.openModal,closeOnDimmerClick:this.closeOnDimmerClick,onClose:this.closeModal},o.a.createElement(q.a.Header,null,"Schedule your announcement"),o.a.createElement(q.a.Content,null,o.a.createElement(G,{closeMod:this.closeModal,post_id:this.props.post_id})))))):o.a.createElement(k.a,null,o.a.createElement(k.a.Row,{key:this.props.post_id},o.a.createElement(k.a.Column,{width:14},o.a.createElement(V.a,{innerRef:this.announcementRef},o.a.createElement(E.a,null,o.a.createElement("div",{ref:"title",name:"title",className:"title",dangerouslySetInnerHTML:{__html:this.props.title}}),o.a.createElement("div",{name:"body",className:"body",dangerouslySetInnerHTML:{__html:this.props.body}}))))))}}]),t}(o.a.Component),$=function(e){return o.a.createElement(Y.a,{color:"blue",icon:!0,labelPosition:"left",onClick:e.buttonClick},o.a.createElement(W.a,{name:"add"}),"Add Announcement")},ee={containerStyle:{height:"150px",border:"1px black solid"}},te=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).saveAnnouncement=function(e){var t=a.props.post_id;A.a.post("/announcements",{user_id:999999993,announcement_title:a.state.title,announcement_body:a.state.body,status:"active",announcementId:t},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){a.setState({post_id:e.data.id,openModal:!0,title:"",body:""})}).catch(function(e){console.log(e)})},a.closeModal=function(){a.setState({openModal:!1}),a.props.onSave()},a.deleteAnnouncement=function(e){a.props.onDelete()},a.handleTitleChange=a.handleTitleChange.bind(Object(N.a)(Object(N.a)(a))),a.handleBodyChange=a.handleBodyChange.bind(Object(N.a)(Object(N.a)(a))),a.saveAnnouncement=a.saveAnnouncement.bind(Object(N.a)(Object(N.a)(a))),a.deleteAnnouncement=a.deleteAnnouncement.bind(Object(N.a)(Object(N.a)(a))),a.placeHolderRef=o.a.createRef(),a.state={title:"",body:"",live:!0,post_id:"",new_post_id:"",openModal:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e})}},{key:"handleBodyChange",value:function(e){this.setState({body:e})}},{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:14},o.a.createElement(V.a,{innerRef:this.placeHolderRef},o.a.createElement(E.a,{style:ee.containerStyle},o.a.createElement(F.a,{ref:"body",inline:!0,apiKey:"2v70mtgk4kz045dkbblsshf5xoky86546vqb4bvj4h3oaqds",initialValue:"<h1 style='text-align: center;'><span style='text-decoration: underline; color: #ffffff'>Title</span></h1>",init:{menubar:!1,fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 20px 22px 24px 26px 28px 30px 34px 38px 42px 46px 50px"},plugins:"link table wordcount textcolor visualblocks spellchecker",toolbar:"cut copy paste undo redo bold italic underline fontsizeselect forecolor backcolor align image",onEditorChange:this.handleTitleChange}),o.a.createElement(F.a,{ref:"body",inline:!0,apiKey:"2v70mtgk4kz045dkbblsshf5xoky86546vqb4bvj4h3oaqds",initialValue:"<ul style='color: #ffffff'> <li> <h3 style='color: #ffffff'>Body</h3> </li> </ul>",init:{menubar:!1,fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 20px 22px 24px 26px 28px 30px 34px 38px 42px 46px 50px"},plugins:"link table wordcount lists textcolor image",toolbar:"cut copy paste undo redo bold italic underline fontsizeselect forecolor backcolor align numlist bullist image",onEditorChange:this.handleBodyChange})))),o.a.createElement(k.a.Column,{floated:"right",verticalAlign:"middle",width:2},o.a.createElement(W.a,{name:"trash alternate",size:"large",onClick:this.props.onDelete,inverted:!0}),o.a.createElement(W.a,{name:"save",size:"large",onClick:this.saveAnnouncement,inverted:!0}),o.a.createElement(q.a,{open:this.state.openModal,size:"small"},o.a.createElement(q.a.Header,null,"Schedule your announcement"),o.a.createElement(q.a.Content,null,o.a.createElement(G,{closeMod:this.closeModal,post_id:this.state.post_id}))))))}}]),t}(o.a.Component),ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).clickAdd=function(){a.setState({add:!0,showAddButton:!1,savedSchedule:!1})},a.renderAnnouncement=function(){return a.state.fullAnnouncement.map(function(e){return o.a.createElement(X,{key:e.id,isLive:a.state.live,onDelete:a.deleteAnnouncement,onEditorChange:a.handleEditorChange,post_id:e.id,title:e.announcement_title,body:e.announcement_body,onSave:a.updateAfterSave,afterDelete:a.updateAfterDelete})})},a.updateAfterSave=function(){a.setState({savedSchedule:!0}),a.getActivePosts(),a.setState({add:!1,showAddButton:!0}),a.setState({showAddButton:!0})},a.clickDelete=function(){setTimeout(function(){Object(Q.toast)({title:"Deleted announcement"})},500),a.setState({add:!1,showAddButton:!0})},a.getActivePosts=function(){A.a.get("/announcements/liveStatus").then(function(e){a.setState({fullAnnouncement:e.data,title:e.title,body:e.body})}).catch(function(e){return console.log(e)})},a.updateAfterDelete=function(){setTimeout(function(){Object(Q.toast)({title:"Deleted announcement"})},500),a.setState({deleted:!0}),a.getActivePosts()},a.state={fullAnnouncement:[],title:"true",body:"true",content:"",live:!0,add:!1,deleted:!1,showAddButton:!0},a.setAnnouncementRef=function(e){a.announcementRef=e},a.handleEditorChange=a.handleEditorChange.bind(Object(N.a)(Object(N.a)(a))),a.clickAdd=a.clickAdd.bind(Object(N.a)(Object(N.a)(a))),a.getActivePosts=a.getActivePosts.bind(Object(N.a)(Object(N.a)(a))),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleEditorChange",value:function(e){this.setState({content:e})}},{key:"componentDidMount",value:function(){this.getActivePosts(),setTimeout(function(){},100)}},{key:"render",value:function(){return R.isAuthenticated()?o.a.createElement(V.a,{innerRef:this.setAnnouncementRef},o.a.createElement(E.a,{className:"announcementsCont",key:this.props.key,style:{padding:"3em 0em 0em",height:"100%"}},o.a.createElement(k.a,null,o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:16},this.renderAnnouncement(),this.state.showAddButton&&o.a.createElement($,{buttonClick:this.clickAdd}),this.state.add&&o.a.createElement(te,{onDelete:this.clickDelete,boardB:this.props.boardBotto,onSave:this.updateAfterSave})))))):o.a.createElement(V.a,{innerRef:this.announcementsRef},o.a.createElement(E.a,{className:"announcementsCont",key:this.props.key,style:{padding:"3em 0em 0em"}},o.a.createElement(k.a,null,o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:16},this.renderAnnouncement())))))}}]),t}(o.a.Component),ne=function(){return o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:4},o.a.createElement(_,{weatherVW:".5vw"})),o.a.createElement(k.a.Column,{width:8},o.a.createElement(S.a,{textAlign:"center",as:"h1",inverted:!0,style:{fontSize:"calc(31px + .5vw)",fontWeight:"200"}},"Announcements")),o.a.createElement(k.a.Column,{width:4},o.a.createElement(w,{dateVW:".5vw"})))},oe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).myRef=o.a.createRef(),a.annRef=o.a.createRef(),a.state={announcementBottom:"",boardBottom:"",backgroundColor:"#000000",backgroundImg:"https://www.solidbackgrounds.com/images/1024x768/1024x768-black-solid-color-background.jpg",backgroundUpdated:!1,opacity:0},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.backgroundColor!==e.backgroundColor&&this.setState({backgroundColor:this.props.backgroundColor}),this.props.opacity!==e.opacity&&this.setState({opacity:this.props.opacity}),this.props.backgroundImage!==e.backgroundImage&&this.setState({backgroundImg:this.props.backgroundImage})}},{key:"componentDidMount",value:function(){var e=this;A.a.get("/boards").then(function(t){return e.setState({backgroundImg:t.data[0].background_image,opacity:t.data[0].background_opacity})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e={height:"768px",width:"1024px",margin:"0 auto",backgroundImage:"url(".concat(this.state.backgroundImg,")"),flex:1};return o.a.createElement("div",{ref:this.myRef,style:e,onClick:this.editBackground},o.a.createElement("div",{style:{background:"rgb(0,0,0,".concat(this.state.opacity,")"),height:"100%",width:"100%",padding:"1em"}},o.a.createElement(k.a,{style:{}},o.a.createElement(ne,null),o.a.createElement(k.a.Row,null,o.a.createElement(ae,{ref:this.annRef,boardBotto:this.state.boardBottom,getBottom:this.getAnnouncementSize})))))}}]),t}(o.a.Component),ce=Object(y.a)(oe),le=a(253),ie=(a(739),a(741),a(471)),re=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).log=function(e){var t=a.percentFormatter(e);a.props.didOpacityUpdate(t)},a.percentFormatter=function(e){return(.1*e).toFixed(1)},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:10},o.a.createElement("div",null,o.a.createElement(ie.a,{tipFormatter:this.percentFormatter,tipProps:{overlayClassName:"foo"},onChange:this.log,min:0,max:10,defaultValue:10|this.value})),o.a.createElement("p",{style:{textAlign:"left"}},"0",o.a.createElement("span",{style:{float:"right"}},"100%")))))}}]),t}(o.a.Component),se=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).openModal=function(){a.setState({modalOpen:!0})},a.handleBackgroundPosition=function(e,t){var n=t.value;return a.setState({value:n})},a.handleError=function(e){if(400===e.response.status){setTimeout(function(){Object(Q.toast)({title:"Error uploading image",description:"Check the image url"})},500);var t={backgroundColor:a.state.backgroundColor,backgroundImage:a.state.imageURL};a.props.didBackgroundUpdate(t)}},a.close=function(e){if(200===e.status){setTimeout(function(){Object(Q.toast)({title:"Background updated"})},500),a.setState({modalOpen:!1});var t={backgroundColor:a.state.backgroundColor,backgroundImage:a.state.imageURL,backgroundOpacity:a.state.opacity};a.props.didBackgroundUpdate(t)}else{a.setState({modalOpen:!1});var n={backgroundColor:a.state.backgroundColor,backgroundImage:a.state.imageURL,backgroundOpacity:a.state.opacity};a.props.didBackgroundUpdate(n)}},a.submitBackground=function(){A.a.put("/boards",{background_color:a.state.backgroundColor,background_image:a.state.imageURL,background_opacity:a.state.opacity,id:1}).then(function(e){return a.close(e)}).catch(function(e){return a.handleError(e)})},a.handleChangeComplete=function(e){a.setState({backgroundColor:e.hex})},a.inputRef=Object(n.createRef)(),a.state={modalOpen:!1,imageURL:"",backgroundColor:"",backgroundPosition:"center",opacity:0},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("/boards");case 2:t=e.sent,this.setState({opacity:t.data[0].background_opacity,imageURL:t.data[0].background_image});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.opacity!==this.props.opacity&&this.setState({opacity:this.props.opacity})}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalOpen,n=t.imageURL;return o.a.createElement(E.a,null,o.a.createElement(q.a,{open:a},o.a.createElement(q.a.Header,null,"Edit Background"),o.a.createElement(q.a.Content,null,o.a.createElement(k.a,{columns:2},o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,null,o.a.createElement(S.a,null,"Add image as background"),o.a.createElement(le.a,{ref:this.inputRef,onChange:function(t){return e.setState({imageURL:t.target.value})},placeholder:"url"}),o.a.createElement(S.a,{as:"h3"},"Opacity setting for display"),o.a.createElement(re,this.props)),o.a.createElement(k.a.Column,null,o.a.createElement(z.a,{src:n,size:"medium",centered:!0}))))),o.a.createElement(q.a.Actions,null,o.a.createElement(Y.a,{onClick:this.close,negative:!0},"Cancel"),o.a.createElement(Y.a,{onClick:this.submitBackground,positive:!0,labelPosition:"right",icon:"checkmark",content:"Save"}))),o.a.createElement(Y.a,{onClick:this.openModal,color:"blue"},"Edit Background"))}}]),t}(o.a.Component),ue=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(E.a,null,o.a.createElement(se,this.props))}}]),t}(o.a.Component),de=(a(796),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getBackground=function(e){a.setState({backgroundImage:e.backgroundImage}),a.props.didBackgroundUpdate(e)},a.getOpacity=function(e){a.props.didOpacityUpdate()},a.state={fullAnnouncement:[],title:"true",body:"true",content:"",live:!0,add:!1,backgroundColor:"",backgroundImage:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return R.isAuthenticated()?o.a.createElement("div",null,o.a.createElement(E.a,{key:this.props.key,style:{minHeight:"100vh",padding:"3em 0em 0em",backgroundColor:"white",marginTop:"5em",marginBottom:"5em",flex:1}},o.a.createElement(P,null),o.a.createElement(Q.SemanticToastContainer,null),o.a.createElement(ue,Object.assign({},this.props,{didBackgroundUpdate:this.getBackground})),o.a.createElement(ce,Object.assign({},this.props,{backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage}))),o.a.createElement(L,null)):o.a.createElement("div",null,o.a.createElement(E.a,{key:this.props.key,style:{minHeight:"100%",height:"100%",padding:"3em 0em 0em",backgroundColor:"white",marginTop:"5em",flex:1}},o.a.createElement(P,null),o.a.createElement(ce,{backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage})),o.a.createElement(L,null))}}]),t}(o.a.Component)),me=Object(y.a)(de),he=a(254),pe=a(329),ge=a.n(pe),fe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).strip=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},a.fetchAnnouncements=Object(u.a)(s.a.mark(function e(){var t,n,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("/announcements/status");case 2:t=e.sent,n=t.data,o=n.active,c=n.inactive,l=n.scheduled,a.setState({posts:t.data,activePosts:o,inactivePosts:c,scheduledPosts:l});case 5:case"end":return e.stop()}},e)})),a.handleSort=function(e,t){return function(){var n=a.state,o=n.column,c=n.direction;o===e?a.setState({clickedTable:ge.a.reverse(),direction:"ascending"===c?"descending":"ascending"}):a.setState({column:e,clickedTable:ge.a.sortBy(t,[e]),direction:"ascending"})}},a.afterDelete=function(){setTimeout(function(){Object(Q.toast)({title:"Deleted announcement"})},500),a.fetchAnnouncements()},a.deleteAnnouncement=function(e,t){A.a.post("/announcements/status",{user_id:999992,id:t.value,status:"archive"},{headers:{Authorization:"Bearer ".concat(R.getIdToken())}}).then(function(e){return a.afterDelete()}).catch(function(e){return console.log(e)})},a.state={posts:"",activePosts:"",inactivePosts:"",scheduledPosts:"",table:null,column:null,direction:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.fetchAnnouncements()}},{key:"render",value:function(){var e=this,t=this.state,a=t.column,n=t.direction,c=t.activePosts,l=t.inactivePosts,i=t.scheduledPosts;return o.a.createElement("div",null,o.a.createElement(E.a,{style:{marginTop:"7em",minHeight:"100vh",flex:1}},o.a.createElement(P,null),o.a.createElement(Q.SemanticToastContainer,null),o.a.createElement(S.a,null,"Welcome"),o.a.createElement(S.a,null,"Active"),o.a.createElement(he.a,{celled:!0,sortable:!0,selectable:!0,className:"active"},o.a.createElement(he.a.Header,null,o.a.createElement(he.a.Row,null,o.a.createElement(he.a.HeaderCell,{sorted:"title"===a?n:null,onClick:this.handleSort("title","activePosts")},"Title"),o.a.createElement(he.a.HeaderCell,{sorted:"body"===a?n:null,onClick:this.handleSort("body","activePosts")},"Body"),o.a.createElement(he.a.HeaderCell,{sorted:"dateStart"===a?n:null,onClick:this.handleSort("dateStart","activePosts")},"Date start"),o.a.createElement(he.a.HeaderCell,{sorted:"dateEnd"===a?n:null,onClick:this.handleSort("dateEnd","activePosts")},"Date End"),o.a.createElement(he.a.HeaderCell,null,"Options"))),o.a.createElement(he.a.Body,null,c&&c.map(function(t){return o.a.createElement(he.a.Row,{key:t.id},o.a.createElement(he.a.Cell,null,e.strip(t.announcement_title)),o.a.createElement(he.a.Cell,null,e.strip(t.announcement_body)),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_start),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_end),o.a.createElement(he.a.Cell,null,o.a.createElement(Y.a,{icon:"trash",value:t.id,onClick:e.deleteAnnouncement})))}))),o.a.createElement(S.a,null,"Scheduled"),o.a.createElement(he.a,{celled:!0,sortable:!0,selectable:!0,className:"scheduled"},o.a.createElement(he.a.Header,null,o.a.createElement(he.a.Row,null,o.a.createElement(he.a.HeaderCell,null,"Title"),o.a.createElement(he.a.HeaderCell,null,"Body"),o.a.createElement(he.a.HeaderCell,null,"Date start"),o.a.createElement(he.a.HeaderCell,null,"Date End"),o.a.createElement(he.a.HeaderCell,null,"Options"))),o.a.createElement(he.a.Body,null,i&&i.map(function(t){return o.a.createElement(he.a.Row,{key:t.id},o.a.createElement(he.a.Cell,null,e.strip(t.announcement_title)),o.a.createElement(he.a.Cell,null,e.strip(t.announcement_body)),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_start),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_end),o.a.createElement(he.a.Cell,null,o.a.createElement(Y.a,{icon:"trash",value:t.id,onClick:e.deleteAnnouncement})))}))),o.a.createElement(S.a,null,"Inactive"),o.a.createElement(he.a,{celled:!0,sortable:!0,selectable:!0,className:"inactive"},o.a.createElement(he.a.Header,null,o.a.createElement(he.a.Row,null,o.a.createElement(he.a.HeaderCell,null,"Title"),o.a.createElement(he.a.HeaderCell,null,"Body"),o.a.createElement(he.a.HeaderCell,null,"Date start"),o.a.createElement(he.a.HeaderCell,null,"Date End"),o.a.createElement(he.a.HeaderCell,null,"Options"))),o.a.createElement(he.a.Body,null,l&&l.map(function(t){return o.a.createElement(he.a.Row,{key:t.id},o.a.createElement(he.a.Cell,null,e.strip(t.announcement_title)),o.a.createElement(he.a.Cell,null,e.strip(t.announcement_body)),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_start),o.a.createElement(he.a.Cell,null,t.Schedule.date_time_end),o.a.createElement(he.a.Cell,null,o.a.createElement(Y.a,{icon:"trash",value:t.id,onClick:e.deleteAnnouncement})))})))),o.a.createElement(L,null))}}]),t}(o.a.Component),be=Object(y.a)(fe),ye=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(U.a,{className:"MainStyle",style:{marginTop:"3em",minHeight:"100vh",flex:1}},o.a.createElement(P,null),o.a.createElement(k.a,{textAlign:"center",style:{margin:"5em 0em 0em",padding:"5em 0em"}},o.a.createElement(k.a.Row,{verticalAlign:"middle",textAlign:"center"},o.a.createElement(k.a.Column,{width:16},o.a.createElement(S.a,{style:{fontSize:"3rem",padding:"0em 0em 1em"}},"Make announcements faster."),o.a.createElement(S.a,{as:"h1"},"Get started here"),!R.isAuthenticated()&&o.a.createElement(Y.a,{color:"blue",size:"massive",onClick:R.signIn},"Add announcement"),R.isAuthenticated()&&o.a.createElement(Y.a,{color:"blue",size:"massive"},o.a.createElement(H.a,{to:"/displayeditor",style:{color:"white"}},"Add announcement")),o.a.createElement(S.a,{as:"h1"},"Already have a post?"))),o.a.createElement(k.a.Row,{columns:2},o.a.createElement(k.a.Column,{width:"4",textAlign:"center"},o.a.createElement(Y.a,{color:"blue",size:"massive"},o.a.createElement(H.a,{to:"/display",target:"_blank",style:{color:"white"}},"View live post"))),o.a.createElement(k.a.Column,{width:"4",textAlign:"center"},!R.isAuthenticated()&&o.a.createElement(Y.a,{color:"blue",size:"massive",onClick:R.signIn},"View previous posts"),R.isAuthenticated()&&o.a.createElement(Y.a,{color:"blue",size:"massive"},o.a.createElement(H.a,{to:"/profile",style:{color:"white"}},"View previous posts")))))),o.a.createElement(L,null))}}]),t}(o.a.Component),Ee=Object(y.a)(ye),ke=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("p",null,"Loading profile...")}}]),t}(n.Component),ve=Object(y.a)(ke),Ce=a(470),Se=a.n(Ce)()(),xe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={backgroundImage:"",opacity:0},a.getOpacity=function(e){a.setState({opacity:e})},a.getBackground=function(e){a.setState({backgroundImage:e.backgroundImage})},a.componentDidUpdate=function(e,t){},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=3;break}return this.setState({checkingSession:!1}),e.abrupt("return");case 3:return e.prev=3,e.next=6,R.silentAuth();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),"login_required"!==e.t0.error&&console.log(e.t0.error);case 11:this.setState({checkingSession:!1});case 12:case"end":return e.stop()}},e,this,[[3,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement(f.a,{history:Se},o.a.createElement("div",null,o.a.createElement(b.a,{path:"/",exact:!0,render:function(e){return o.a.createElement(Ee,Object.assign({auth:R},e))}}),o.a.createElement(b.a,{path:"/display",render:function(t){return o.a.createElement(D,Object.assign({auth:R,bk:e.state.backgroundImage,opacity:e.state.opacity},t))}}),o.a.createElement(b.a,{path:"/displayeditor",render:function(t){return R.isAuthenticated()?o.a.createElement(me,Object.assign({auth:R,didBackgroundUpdate:e.getBackground,didOpacityUpdate:e.getOpacity,opacity:e.state.opacity},t)):R.signIn()}}),o.a.createElement(b.a,{path:"/profile",render:function(t){return o.a.createElement(be,Object.assign({auth:R,bk:e.state.backgroundImage},t))}}),o.a.createElement(b.a,{exact:!0,path:"/callback",component:ve}))))}}]),t}(n.Component),Oe=Object(y.a)(xe);l.a.render(o.a.createElement(i.a,null,o.a.createElement(Oe,null)),document.getElementById("root"))}},[[476,2,1]]]);
//# sourceMappingURL=main.66377eb9.chunk.js.map